<%# Command Generator %>
<div id="rails-new-command-generator-holder"
     class="flex-col bg-deep-azure-zeta pt-3 z-50">
  <div id="rails-new-output-container"
    class="text-gray-200 max-w-6xl mt-3 sm:mt-3 md:mt-3 lg:mt-4 xl:mt-4 h-auto sm:h-auto md:h-20 lg:h-20 xl:h-auto mb-6 mx-auto flex items-center">
    <p id="rails-new-output-text"
      class="font-mono text-left px-5 sm:px-5 md:px-8 lg:px-10 xl:px-12 text-xs md:text-sm lg:text-sm xl:text-sm break-normal">
      <code class="text-gray-500">rails new my-app </code>
      <code id="api-flag"></code>
      <code data-controller="generated-output" id="database-choice"></code>
      <code data-controller="generated-output" id="rails-flags"></code>
      <code id="rails-bytes"></code>
    </p>
  </div>
  <div class="mt-10 sm:flex-wrap md:flex items-center justify-center divide-y sm:divide-y-2 md:divide-y-0 divide-gray-400 bg-deep-azure-zeta sm:pb-0 md:pb-8">
    <%= form_tag recipes_path, method: :post, class: "inline",
            data: {
              controller: "form-values",
              action: "generated-output:valueChanged@window->form-values#updateFromDisplay"
            } do %>
      <%= hidden_field_tag "recipe[api_flag]", nil,
              data: { form_values_target: "apiFlag" } %>
      <%= hidden_field_tag "recipe[database_choice]", nil,
              data: { form_values_target: "databaseChoice" } %>
      <%= hidden_field_tag "recipe[rails_flags]", nil,
              data: { form_values_target: "railsFlags" } %>
      <div class="space-y-4 max-w-lg mx-auto">
        <div>
          <%= label_tag "recipe[name]", "Recipe Name", class: "block text-sm font-medium text-gray-100" %>
          <div class="mt-1">
            <%= text_field_tag "recipe[name]", nil,
                class: "shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",
                placeholder: "My Rails App Recipe",
                required: true %>
          </div>
        </div>
        <div>
          <%= label_tag "recipe[description]", "Description", class: "block text-sm font-medium text-gray-100" %>
          <div class="mt-1">
            <%= text_area_tag "recipe[description]", nil,
                class: "shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",
                rows: 3,
                placeholder: "Describe what this recipe does..." %>
          </div>
        </div>
        <div class="relative flex items-start">
          <div class="flex items-center h-5">
            <%= check_box_tag "recipe[status]", "published", true,
                class: "focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded" %>
          </div>
          <div class="ml-3 text-sm">
            <%= label_tag "recipe[status]", "Published", class: "font-medium text-gray-100" %>
            <p class="text-gray-300">Make this recipe available for use</p>
          </div>
        </div>
      </div>
      <%= button_tag type: "submit",
            class: "mt-6 flex-none inline-flex h-12 items-center bg-deep-azure-gamma rounded-lg px-6 text-gray-100 shadow-2xl" do %>
        Create Recipe
      <% end %>
    <% end %>
  </div>
</div>
<%# Tabs and Content %>
<div data-controller="tabs" data-tabs-current-page-value="<%= @page.slug %>">
  <div class="bg-deep-azure-zeta">
    <div class="max-w-7xl mx-auto">
      <div>
        <div>
          <nav class="-mb-px flex space-x-1 md:space-x-2" aria-label="Tabs">
            <% Page.all.each do |page| %>
              <%= link_to setup_recipes_path(slug: page.slug),
                  id: "#{page.slug}-tab",
                  data: {
                    tabs_target: "tab",
                    action: "click->tabs#change",
                    page_slug: page.slug,
                    page_url: setup_recipes_path(slug: page.slug)
                  },
                  class: "tab #{page == @page ? 'tab-active' : 'tab-inactive'}" do %>
                <%= page.title %>
              <% end %>
            <% end %>
          </nav>
        </div>
      </div>
    </div>
  </div>
  <div data-tabs-target="panels">
    <% Page.all.each do |page| %>
      <div id="<%= page.slug %>-panel"
           class="<%= page == @page ? "" : "hidden" %>"
           data-tabs-target="panel">
        <%= render Pages::Component.new(page: page) %>
      </div>
    <% end %>
  </div>
</div>
